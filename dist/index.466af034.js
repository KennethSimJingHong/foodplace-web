"use strict";const form=document.querySelector(".form"),containerPlaces=document.querySelector(".places"),inputCategory=document.querySelector(".form__input--category"),inputName=document.querySelector(".form__input--name"),inputComment=document.querySelector(".form__input--comment"),inputRate=document.querySelector(".form__input--rate"),inputSort=document.querySelector(".container__sort--option");class Place{id=(Date.now()+"").slice(-10);constructor(t,e,a,n,o){this.coords=t,this.name=e,this.comment=a,this.rate=n,this.category=o}}class App{#t;#e;#a=[];#n=[new Place([3.1321683,101.6710431],"myBurgerLab","The beef patty is on the soft side, but not too mushy. The chips are real skin on potato chips that are cut not too thinly. Loving it!",4,"western")];constructor(){this._getPosition(),form.addEventListener("submit",this._newPlace.bind(this)),containerPlaces.addEventListener("click",this._moveToPopup.bind(this)),inputSort.addEventListener("change",this._controlHandlerSorting.bind(this))}_getPosition(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(this._loadMap.bind(this),(function(){}))}_loadMap(t){const{latitude:e}=t.coords,{longitude:a}=t.coords,n=[e,a];this.#t=L.map("map").setView(n,15),L.tileLayer("https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'}).addTo(this.#t),this.#t.on("click",this._showForm.bind(this)),this._getData()}_showForm(t){this.#e=t,inputName.focus()}_newPlace(t){t.preventDefault();const e=inputCategory.value,a=inputName.value,n=inputComment.value,o=+inputRate.value;if(!this.#e)return alert("Be sure you have select a place!");const{lat:i,lng:s}=this.#e.latlng;if(((...t)=>t.some((t=>!t||0===t.length)))(a,n))return alert("Input should not be empty!");const r=new Place([i,s],a,n,o,e);this.#n.push(r),this._renderPlaceMarker(r),this._renderPlace(r),this._hideForm()}_renderPlaceMarker(t){const e=L.marker(t.coords).addTo(this.#t).bindPopup(L.popup({maxWidth:250,minWidth:100})).setPopupContent(`${t.name}`).openPopup();this.#a.push(e)}_renderPlace(t){const e=`\n            <li class="place" data-id="${t.id}">\n                <h2 class="place__title">${t.name}</h2>\n                <div class="place__details">\n                    <div class="place__details--rating">${(t=>{let e="";for(let a=0;a<t;a++)e+="â­";return e})(t.rate)}</div>\n                    <div class="place__details--category">${t.category}</div>\n                    <div class="place__details--comment">${t.comment}</div>\n                </div>\n                <button class="place__btn--delete" onclick="app._deleteData(this)">Remove</button>\n            </li>\n        `;containerPlaces.insertAdjacentHTML("afterbegin",e)}_hideForm(){inputName.value=inputComment.value="",inputRate.value=1,inputCategory.selectedIndex=0}_moveToPopup(t){const e=t.target.closest(".place");if(!e)return;const a=this.#n.find((t=>t.id===e.dataset.id));a&&this.#t.setView(a.coords,15,{animate:!0,pan:{duration:1}})}_getData(){this.#n.forEach((t=>{this._renderPlaceMarker(t),this._renderPlace(t)}))}_deleteData(t){const e=t.parentElement.closest(".place");if(!e)return;const a=this.#n.filter((t=>t.id===e.dataset.id));this.#n=this.#n.filter((t=>t.id!==e.dataset.id));const n=this.#a.find((t=>t._latlng.lat===a[0].coords[0]&&t._latlng.lng===a[0].coords[1]));this.#t.removeLayer(n),e.remove()}_controlHandlerSorting(t){const e=t.target.value;if(containerPlaces.innerHTML="","default"===e&&this.#n.forEach((t=>{this._renderPlace(t)})),"rating"===e){[...this.#n].sort(((t,e)=>t.rate-e.rate)).forEach((t=>{this._renderPlace(t)}))}}}const app=new App;
//# sourceMappingURL=index.466af034.js.map
